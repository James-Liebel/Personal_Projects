<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Global Land-Surface Temperature Heat Map</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    #tooltip {
      position: absolute;
      background: lightsteelblue;
      padding: 5px;
      border-radius: 5px;
      opacity: 0;
    }
  </style>
</head>
<body>
  <script>
    fetch('https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/global-temperature.json')
      .then(res => res.json())
      .then(data => {
        const dataset = data.monthlyVariance;
        const baseTemperature = 8.66;

        const width = 1000, height = 400, padding = 80;
        const years = Array.from(new Set(dataset.map(d => d.year)));
        const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
        const minYear = d3.min(years), maxYear = d3.max(years);

        const xScale = d3.scaleTime().domain([new Date(minYear, 0), new Date(maxYear, 11)]).range([padding, width - padding]);
        const yScale = d3.scaleBand().domain(months).range([height - padding, padding]);
        const colorScale = d3.scaleSequential(d3.interpolateRdYlBu)
                             .domain(d3.extent(dataset, d => d.variance + baseTemperature).reverse());

        const svg = d3.select('body').append('svg').attr('width', width).attr('height', height);
        svg.append('text').attr('id', 'title').attr('x', width/2).attr('y', padding/2).attr('text-anchor', 'middle')
           .text('Monthly Global Land-Surface Temperature');

        svg.selectAll('rect').data(dataset).enter().append('rect')
          .attr('class', 'cell')
          .attr('x', d => xScale(new Date(d.year, 0)))
          .attr('y', d => yScale(months[d.month - 1]))
          .attr('width', (width - padding * 2) / (maxYear - minYear + 1))
          .attr('height', yScale.bandwidth())
          .attr('fill', d => colorScale(d.variance + baseTemperature));
      });
  </script>
</body>
</html>
